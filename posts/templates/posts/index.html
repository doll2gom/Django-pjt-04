{% extends 'base.html' %}
{% block title %}index{% endblock title %}
{% block body %}
  <div class="container">
    <h1 class="text-center my-3">index</h1>
    <hr>
    {% if request.user.is_authenticated %}
      {{ user }}님 안녕하세요!
      <form action="{% url 'accounts:logout' %}" method="post">
        {% csrf_token %}
        <input type="submit" value="로그아웃" class="btn btn-outline-danger">
      </form>
    {% else %}
      <a href="{% url 'accounts:login' %}" class="btn btn-outline-primary">로그인</a>
      <a href="{% url 'accounts:signup' %}" class="btn btn-outline-primary">회원가입</a>
    {% endif %}
    <hr>
    <a href="{% url 'posts:create' %}">주제 생성</a>
    <table class="table my-5">
      <thead>
        <tr class="table-success">
          <th scope="col">#</th>
          <th scope="col">주제</th>
        </tr>
      </thead>
      {% for post in posts %}
        <tbody>
          <tr onclick="window.location='{% url 'posts:detail' post.pk %}'" style="cursor:pointer;">
            <th scope="row">{{ post.pk }}</th>
            <td>{{ post.title }}</td>
          </tr>
        </tbody>
      {% endfor %}
    </table>
    <!-- pagination -->
    {% if page_obj.has_other_pages %}
      <ul class="pagination justify-content-center">

        {% if post_obj.has_previous %}
          <li class="page-item">
            <a href="?page=1" class="page-link">
              처음으로
            </a>
          </li>
        {% endif %}
        {% for page in paginator.page_range %}
          {% if page == post_obj.number %}
            <li class="page-item">
              <a class="page-link" href="?page={{ page }}">{{ page }}</a>
            </li>
          {% else %}
            <li class="page-item">
              <a class="page-link" href="?page={{ page }}">{{ page }}</a>
            </li>
          {% endif %}
        {% endfor %}
        {% if post_obj.has_next %}
          <li class="page-item">
            <a href="?page={{ post_obj.paginator.num_pages }}" class="page-link">
              끝으로</a>
          </li>
        {% endif %}
      </ul>
    {% endif %}
  </div>
</div>
{% endblock body %}
